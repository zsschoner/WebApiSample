@model ApiMvc.Models.ApiModel
@section Scripts
{
    @Scripts.Render("~/bundles/jqueryui")
    <script type="text/javascript">
        // Apply jQuery accordion widget.
        $(function () { $(".accordion").accordion(); });
    </script>
}

@{
    const string mediaFormat = "application/json";
}

<div id="body" class="content-wrapper">
    <h2>
        API Help</h2>
    @foreach (var group in Model.GetApis())
    {
        <h3>@group.Key</h3>

        <div class="accordion">
            @foreach (var api in group)
            {
                <h4>
                    <a href="#">@api.HttpMethod @api.RelativePath</a></h4>
                <div>
                    @foreach (var param in api.ParameterDescriptions)
                    {
                        <p>
                            Parameter: <em>@param.Name</em> (@param.Source)
                            @{
                                string paramSample = Model.GetParamSample(api, param, mediaFormat); 
                            }
                            @if (paramSample != null)
                            {
                                <div>Sample parameter value:</div>
                                <code>@paramSample</code> }
                            }
                        </p>                            
                    }
                    @{ 
                    string response = Model.GetSampleResponseBody(api, mediaFormat);
                    }
                    @if (response != null)
                    {
                        <p>
                            Sample response body:</p>
                        <p>
                            <code>@response</code></p>
                    }
                </div>
            }
        </div>
    }
</div>
